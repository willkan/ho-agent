# 🤖 人类协调的多智能体开发框架

[English](README.md) | 中文

一个专为Claude Code设计的复杂多智能体开发框架，用于AI辅助软件开发。

## ✨ 核心特性

- **11个专业AI智能体** - 从需求到部署的全流程覆盖
- **故事线驱动开发** - 按用户旅程拆分任务，底层向上集成
- **真正的多智能体并发** - 多个Task并行执行，上下文隔离
- **自动化执行** - 无需不必要的确认提示
- **渐进式集成** - 逐层解决集成问题，避免集成地狱

## 🚀 快速开始

### 选项1：直接设置（推荐）

```bash
# 进入你的项目目录
cd /path/to/your/project

# 运行设置脚本
bash /path/to/ho-agent/setup-workflow.sh
```

### 选项2：全局命令

一次安装：
```bash
bash /path/to/ho-agent/install-global.sh
```

然后在任何地方使用：
```bash
cd any-project
ho-agent
```

## 💬 使用示例

```bash
# 在项目目录中
cd my-project
claude  # 在项目中启动Claude

# 使用workflow开始开发
> 按照workflow开发一个电商平台

# Claude会：
# 1. 先通过对话澄清需求
# 2. 并行运行分析（需求/架构/UX设计）
# 3. 生成故事线拆分和ASCII依赖图
# 4. 等待你确认
# 5. 使用多智能体协作渐进式开发故事线

# 对话示例：
> 按照workflow开发一个外卖平台
Claude: 好的，先了解一下需求。这是面向C端用户的外卖平台吗？
> 是的，类似饿了么
Claude: 需要支持移动端吗？还是先做PC版？
> 移动优先，但要响应式
Claude: 最核心的功能有哪些？
> 餐厅列表、菜单浏览、购物车、下单
Claude: 明白了。需要用户登录吗？
> MVP版本先不要，用本地存储
Claude: 了解了，需求清楚了。现在开始multi-agent开发流程...
[Stage 1: 并发执行需求分析、架构设计、UX设计...]
```

## 📋 核心规则

### 1. 故事线生命周期

每个故事线必须完成完整的开发周期：
```
开发 → 自测 → 验证 → 集成 → 完成
```
✅ **必须**: 每个故事线通过所有测试才能继续  
❌ **禁止**: 跳过测试直接进入下一个故事线

### 2. 自动执行

- 验证通过后自动继续
- 从不询问"我应该继续吗？"
- 仅在以下情况暂停：需求确认、故事线审批、部署决策

### 3. 多智能体协作

- **并行执行**: 独立故事线可同时开发（最多3个）
- **上下文隔离**: 每个agent只看自己负责的故事线
- **依赖管理**: 严格遵守故事线依赖关系

## 🎭 可用智能体

| 智能体 | 职责 |
|-------|------|
| **coordinator** | 中央协调和冲突解决 |
| **requirements-analyst** | 需求收集和文档化 |
| **technical-architect** | 系统设计和架构 |
| **frontend-developer** | React/TypeScript UI开发 |
| **backend-developer** | Node.js/Fastify API开发 |
| **qa-engineer** | 质量验证和测试 |
| **devops-engineer** | 基础设施和部署 |
| **ux-designer** | 用户界面设计 |
| **project-manager** | 计划和资源管理 |
| **documentation-writer** | 技术文档 |
| **code-reviewer** | 代码质量和最佳实践 |

## 📂 设置后的项目结构

```
your-project/
├── CLAUDE.md              # Claude Code配置 ⚠️ 关键文件！
├── .claude/
│   ├── agents/           # 智能体配置
│   ├── workflows/        # 工作流定义  
│   ├── storylines/       # 故事线进度追踪
│   └── state/           # 状态追踪
└── [你的文件...]
```

## 🎯 故事线驱动开发

### 什么是故事线？

故事线是完整的用户旅程，例如：
- "用户注册并登录" - 不只是"创建用户表"
- "浏览并购买商品" - 不只是"商品列表API"
- "管理购物车" - 完整的添加/删除/修改流程

### 故事线依赖图示例

```
┌─────────────────────────────────────────────────────┐
│              项目故事线依赖图                         │
└─────────────────────────────────────────────────────┘

Priority 1 (基础层 - 可并行):
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│ 用户认证     │     │ 商品浏览     │     │ 静态页面     │
│ ⏱ 3天        │     │ ⏱ 2天        │     │ ⏱ 1天        │
└──────┬───────┘     └──────┬───────┘     └──────┬───────┘
       └─────────────────────┼─────────────────────┘
                            ▼
Priority 2 (集成层):
                    ┌──────────────┐
                    │ 购物车管理   │
                    │ 依赖: P1全部 │
                    │ ⏱ 2天        │
                    └──────┬───────┘
                            ▼
Priority 3 (顶层):
                    ┌──────────────┐
                    │ 订单结算     │
                    │ 依赖: 购物车 │
                    │ ⏱ 3天        │
                    └──────────────┘
```

## 🔄 开发工作流

0. **需求澄清** - 通过对话理解需求
1. **规划** - 需求分析和架构设计（并行）
2. **故事线拆分** - 生成依赖图，等待确认
3. **渐进开发** - 按层开发故事线
4. **自测门禁** - 每个故事线必须通过测试
5. **集成** - 验证故事线间的集成
6. **部署准备** - 生产就绪
7. **完成** - 文档和交接

## 📚 文档

| 文档 | 用途 |
|------|------|
| [STORYLINE-TEMPLATE.md](STORYLINE-TEMPLATE.md) | 故事线定义模板 |
| [STORYLINE-EXAMPLE.md](STORYLINE-EXAMPLE.md) | 故事线示例 |
| [WORKFLOW-SETUP.md](WORKFLOW-SETUP.md) | 详细设置说明 |
| [VALIDATION-PROTOCOL.md](VALIDATION-PROTOCOL.md) | 临时文件管理细节 |

## 🎯 核心理念

> "每个功能属于一个故事线，每个故事线讲述用户的故事。"

故事线不是技术任务的集合，而是用户体验的完整旅程。

## 📄 许可证

MIT

---

为解决"单智能体上下文受限"和"集成地狱"问题而生。